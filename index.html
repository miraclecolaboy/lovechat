  <!DOCTYPE html>
  <html lang="zh">
  <head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>アイチャット</title>
  <link rel="stylesheet" href="./style.css">
  </head>
  <body>

  <!-- 登录卡 -->
  <div id="loginView" class="card login-card">
    <h2>登录 / 注册</h2>
    <input id="li-username" placeholder="用户名" />
    <input id="li-password" type="password" placeholder="密码" />
    <!-- 前端仅检查是否填写 后端负责校验有效性 -->
    <input id="li-code" placeholder="邀请码" value="" />

    <div class="row">
      <button id="btn-register" class="btn">注册</button>
      <button id="btn-login" class="btn">登录</button>
    </div>
    <p class="note">注册请输入邀请码 设置相较简短的账号密码</p>
  </div>


  <!-- 主界面 -->
  <div id="app" class="app" style="display:none">

    <header class="topbar">
      <div class="left">
        <div id="meName" class="me-name">用户名</div>
        <div id="statusText" class="small muted">已登录</div>
      </div>
      <div class="right">
        <button id="btn-logout" class="btn">登出</button>
      </div>
    </header>

    <main class="main">
      <!-- 消息 tab -->
      <section id="tab-messages" class="tab view active">
        <div id="conversationsPanel" class="panel pad">
          <div class="title">会话</div>
          <div id="conversationsList" class="list"></div>
        </div>

        <div id="chatPanel" class="panel pad" style="display:none">
          <div class="chat-header" style="display:flex;justify-content:space-between;align-items:center;">
            <div style="display:flex;align-items:center;gap:8px">
              <button id="backToConvos" class="btn small outline">返回</button>
              <div>
                <div id="chatTitle">请选择会话</div>
                <div id="friendRemarkDisplay" class="small muted"></div>
              </div>
            </div>
          </div>

          <div id="chatWindow" class="chat-window"></div>

  <div class="composer">
    <div class="row text-send">
      <input id="msgInput" placeholder="输入消息并回车发送" />
      <button id="btnSendText" class="btn">发送文字</button>
    </div>

    <div class="row image-send">
      <input type="file" id="imgUpload" accept="image/*" />
      <button id="btnSendImage" class="btn">发送图片</button>
    </div>

    <div class="row video-send">
      <input type="file" id="videoUpload" accept="video/*" />
      <button id="btnSendVideo" class="btn">发送视频</button>
    </div>
  </div>

        </div>
      </section>

      <!-- 联系人 tab -->
      <section id="tab-contacts" class="tab view">
        <div class="panel pad">
          <div class="title">添加联系人</div>
          <div class="row" style="gap:8px">
            <input id="newFriend" placeholder="添加好友用户名" />
            <button id="btn-add" class="btn">添加</button>
          </div>
        </div>

        <div class="panel pad">
          <div class="title">联系人</div>
          <div id="friendsList" class="list"></div>
        </div>
      </section>

      <!-- 我 tab -->
      <section id="tab-me" class="tab view">
        <div class="panel pad">
          <div class="title"></div>
          <div class="profile-row">
            <div id="meAvatarWrap" class="avatar-wrap"></div>
            <div style="flex:1">
              <input id="avatarInput" placeholder="头像外链 (示例: https://...)" />
              <div class="row" style="margin-top:8px">
                <button id="btnSaveAvatar" class="btn">保存头像</button>
              </div>
            </div><div><a href="https://wallpaperscraft.com/catalog/anime" target="_blank">图库1</a>
            <br><a href="https://anime-pictures.net/" target="_blank">图库2</a>
            </div>
          </div>
        </div>

        <div class="panel pad">
          <div class="title">开发者说明</div>
          <textarea id="meNote" readonly rows="6">
          冷少的世界
          </textarea>
        </div>
      </section>
    </main>

    <nav class="bottom-nav">
      <button class="nav-btn active" data-target="tab-messages" id="nav-msg">消息</button>
      <button class="nav-btn" data-target="tab-contacts" id="nav-contacts">联系人</button>
      <button class="nav-btn" data-target="tab-me" id="nav-me">我</button>
    </nav>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="./app.js"></script>

  </body>
  </html>
